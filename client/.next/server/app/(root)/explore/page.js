(()=>{var e={};e.id=712,e.ids=[712],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},7902:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=t(7096),a=t(6132),l=t(7284),i=t.n(l),o=t(2564),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);t.d(s,n);let c=["",{children:["(root)",{children:["explore",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,850)),"/home/ali2082/AliSohani/Projects/Web/Feast/client/src/app/(root)/explore/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,7955)),"/home/ali2082/AliSohani/Projects/Web/Feast/client/src/app/(root)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9955)),"/home/ali2082/AliSohani/Projects/Web/Feast/client/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ali2082/AliSohani/Projects/Web/Feast/client/src/app/(root)/explore/page.tsx"],p="/(root)/explore/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(root)/explore/page",pathname:"/explore",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4724:(e,s,t)=>{Promise.resolve().then(t.bind(t,1644))},1644:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>components_ExploreComponent});var r=t(784),a=t(9885),l=t(3503),i=t(7505),o=t(655),n=t(1440),c=t.n(n),d=t(7114),p=t(467),u=t(3282);let shared_PostStats=({post:e,userId:s})=>{let t=(0,d.usePathname)(),l=e.likes.map(e=>e.$id),[i,o]=(0,a.useState)(l),[n,c]=(0,a.useState)(!1),{mutate:x}=(0,u.B4)(),{mutate:m}=(0,u.vk)(),{mutate:h}=(0,u.mp)(),{data:g}=(0,u.tZ)(),f=g?.save.find(s=>s.post.$id===e.$id);(0,a.useEffect)(()=>{c(!!f)},[g]);let handleLikePost=t=>{t.stopPropagation();let r=[...i];r.includes(s)?r=r.filter(e=>e!==s):r.push(s),o(r),x({postId:e.$id,likesArray:r})},handleSavePost=t=>{if(t.stopPropagation(),f)return c(!1),h(f.$id);m({userId:s,postId:e.$id}),c(!0)},j=t.startsWith("/profile")?"w-full":"";return(0,r.jsxs)("div",{className:`flex justify-between items-center z-20 ${j}`,children:[(0,r.jsxs)("div",{className:"flex gap-2 mr-5",children:[r.jsx("img",{src:`${(0,p.yi)(i,s)?"/assets/icons/liked.svg":"/assets/icons/like.svg"}`,alt:"like",width:20,height:20,onClick:e=>handleLikePost(e),className:"cursor-pointer"}),r.jsx("p",{className:"small-medium lg:base-medium",children:i.length})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("img",{src:n?"/assets/icons/saved.svg":"/assets/icons/save.svg",alt:"share",width:20,height:20,className:"cursor-pointer",onClick:e=>handleSavePost(e)})})]})};var x=t(6918);let shared_GridPostList=({posts:e,showUser:s=!0,showStats:t=!0})=>{let{user:a}=(0,x.SE)();return r.jsx("ul",{className:"grid-container",children:e.map(e=>(0,r.jsxs)("li",{className:"relative min-w-80 h-80",children:[r.jsx(c(),{href:`/posts/${e.$id}`,className:"grid-post_link",children:r.jsx("img",{src:e.imageUrl,alt:"post",className:"h-full w-full object-cover"})}),(0,r.jsxs)("div",{className:"grid-post_user",children:[s&&(0,r.jsxs)("div",{className:"flex items-center justify-start gap-2 flex-1",children:[r.jsx("img",{src:e.creator.imageUrl||"/assets/icons/profile-placeholder.svg",alt:"creator",className:"w-8 h-8 rounded-full"}),r.jsx("p",{className:"line-clamp-1",children:e.creator.name})]}),t&&r.jsx(shared_PostStats,{post:e,userId:a.id})]})]},e.$id))})},SearchREsults=({isSearchFetching:e,searchedPosts:s})=>e?r.jsx(o.Z,{}):s&&s.documents.length>0?r.jsx(shared_GridPostList,{posts:s.documents}):r.jsx("p",{className:"text-light-4 mt-10 text-center w-full",children:"No results found"}),components_ExploreComponent=e=>{let{ref:s,inView:t}=(0,l.YD)(),{data:n,fetchNextPage:c,hasNextPage:d}=(0,u.Yi)(),[p,x]=(0,a.useState)(""),m=function(e,s){let[t,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let t=setTimeout(()=>{r(e)},s);return()=>{clearTimeout(t)}},[e,s]),t}(p,500),{data:h,isFetching:g}=(0,u.nl)(m);if((0,a.useEffect)(()=>{t&&!p&&c()},[t,p]),!n)return r.jsx("div",{className:"flex-center w-full h-full",children:r.jsx(o.Z,{})});let f=""!==p,j=!f&&n.pages.every(e=>0===e.documents.length);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"explore-inner_container",children:[r.jsx("h2",{className:"h3-bold md:h2-bold w-full",children:"Search Posts"}),(0,r.jsxs)("div",{className:"flex gap-1 px-4 w-full rounded-lg bg-dark-4",children:[r.jsx("img",{src:"/assets/icons/search.svg",width:24,height:24,alt:"search"}),r.jsx(i.I,{type:"text",placeholder:"Search",className:"explore-search",value:p,onChange:e=>{let{value:s}=e.target;x(s)}})]})]}),(0,r.jsxs)("div",{className:"flex-between w-full max-w-5xl mt-16 mb-7",children:[r.jsx("h3",{className:"body-bold md:h3-bold",children:"Popular Today"}),(0,r.jsxs)("div",{className:"flex-center gap-3 bg-dark-3 rounded-xl px-4 py-2 cursor-pointer",children:[r.jsx("p",{className:"small-medium md:base-medium text-light-2",children:"All"}),r.jsx("img",{src:"/assets/icons/filter.svg",width:20,height:20,alt:"filter"})]})]}),r.jsx("div",{className:"flex flex-wrap gap-9 w-full max-w-5xl",children:f?r.jsx(SearchREsults,{isSearchFetching:g,searchedPosts:h}):j?r.jsx("p",{className:"text-light-4 mt-10 text-center w-full",children:"End of posts"}):n.pages.map((e,s)=>r.jsx(shared_GridPostList,{posts:e.documents},`page-${s}`))}),d&&!p&&r.jsx("div",{ref:s,className:"mt-10",children:r.jsx(o.Z,{})})]})}},850:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>page});var r=t(4656),a=t(5153);let l=(0,a.createProxy)(String.raw`/home/ali2082/AliSohani/Projects/Web/Feast/client/src/app/(root)/explore/components/ExploreComponent.tsx`),{__esModule:i,$$typeof:o}=l,n=l.default,page=()=>r.jsx("div",{className:"explore-container",children:r.jsx(n,{})})}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[596,259,635,181,503,388,682,350,699],()=>__webpack_exec__(7902));module.exports=t})();